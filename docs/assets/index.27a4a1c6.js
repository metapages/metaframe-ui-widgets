import{l as h,i as B,A as u,a as e,I as g,Q as j,y as S,M as I,D as v,b as L,c as y,d as x,S as z,u as k,e as P,f as R,B as C,G as U,g as m,T as W,H as $,C as D,h as H,j as G,k as N,m as O,F,n as T,U as Q,L as E,o as q,p as J,N as K,W as V,q as X}from"./vendor.afff5ccd.js";const Y=({url:n})=>{const[o,a]=h(!B());n=n||`${window.location.origin}${window.location.pathname}/README.md`;const c=u(()=>{a(!o)},[o]);return e(S,null,e(g,{verticalAlign:"top","aria-label":"Help",icon:e(j,null),size:"lg",onClick:c,mr:"4"}),e(Z,{url:n,isOpen:o,setOpen:a}))},Z=({isOpen:n,setOpen:o,url:a})=>{const c=u(()=>{o(!n)},[o,n]),p=u(()=>{o(!1)},[o]),r=`https://metapages.github.io/metaframe-markdown/#?url=${a}`;return e(x,{size:"full",placement:"top",onClose:c,isOpen:n,onOverlayClick:p},e(I,null,e(v,null,e(L,{size:"lg",bg:"gray.100"}),e(y,null,e("iframe",{width:"100%",height:"100%",src:r})))))},_=({options:n})=>{const[o,a]=h(!1),c=u(()=>{a(!o)},[o]);return e(S,null,e(g,{verticalAlign:"top","aria-label":"Metaframe settings",icon:e(z,null),size:"lg",onClick:c}),e(ee,{isOpen:o,setOpen:a,options:n}))},ee=({isOpen:n,setOpen:o,options:a})=>{const[c,p]=k("options",Object.fromEntries(a.filter(t=>t.default).map(t=>[t.name,t.default]))),[r,w]=h(c||{}),[le,b]=h(void 0),A=u(t=>{const{name:s,value:l}=t.target,i=a.find(d=>d.name===s);if(!i){console.error(`No option found for name=${s}`);return}i.type==="boolean"?w({...r,[s]:l==="1"}):w({...r,[s]:l})},[r,w,a]),M=u(()=>{o(!n)},[o,n]),f=u(()=>{const t={};if(Object.keys(r).forEach(l=>{const i=a.find(d=>d.name===l);if(i&&i.validator&&i.type!=="boolean"){const d=i.validator(r[l]);d&&(t[l]=d)}}),Object.keys(t).length>0){b(t);return}b(void 0);const s={};Object.keys(r).forEach(l=>{const i=a.find(d=>d.name===l);i?i.map?s[l]=i.map(r[l]):i.type==="boolean"?s[l]=r[l]===!0||r[l]==="1"||r[l]==="true":s[l]=r[l]:s[l]=r[l]}),o(!n),p(s)},[o,n,a,r,p,b]);return P(()=>{if(!n)return;const t=s=>{s.key==="Enter"&&n&&f()};return window.addEventListener("keyup",t),()=>{window.removeEventListener("keyup",t)}},[f,n]),e(x,{placement:"top",onClose:f,isOpen:n},e(I,null,e(v,null,e(R,{borderBottomWidth:"0px"},"Configure metaframe (stored in URL hash params )"),e(y,null,e(C,{maxW:"80%",p:2,borderWidth:"4px",borderRadius:"lg",overflow:"hidden"},e(U,{templateColumns:"repeat(12, 1fr)",gap:6},a.map(t=>e(S,null,e(m,{rowSpan:1,colSpan:4},e(C,{w:"100%",h:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end"},e(W,{textAlign:"right",verticalAlign:"bottom"},t.displayName||t.name,":"))),e(m,{rowSpan:1,colSpan:8}," ",ne(t,r[t.name],A)))),e(m,{rowSpan:1,colSpan:12}),e(m,{rowSpan:1,colSpan:12}),e(m,{rowSpan:1,colSpan:12}),e(m,{rowSpan:1,colSpan:10}),e(m,{rowSpan:0,colSpan:2},e($,{spacing:2,justify:"flex-end",direction:"row"},e(g,{size:"lg",color:"red",icon:e(D,null),onClick:M}),e(g,{size:"lg",color:"green",icon:e(H,null),onClick:f})))))))))},ne=(n,o,a)=>{switch(n.type){case"option":return e(O,{name:n.name,value:o,onChange:a,placeholder:"Select option"},n.options.map(c=>e("option",{value:c},c)));case"boolean":return e(N,{name:n.name,rightIcon:e(H,null),onChange:a,isChecked:o===!0||o==="1",value:o?0:1});default:return e(C,{w:"100%",h:"10"},e(G,{name:n.name,type:"text",placeholder:"",value:o,onInput:a}))}},oe=[{name:"someoption",displayName:"A boolean option",default:!0,type:"boolean"}],ae=()=>e(J,{columns:1,spacing:10},e(F,null,e(T,{size:"md"},"This module exports these widgets (to the right)"),e(Q,null,e(E,null,"Help button showing the (rendered) local ",e("code",null,"./Readme.md")," file"),e(E,null,"Options (configurable) stored encoded in the URL hash params")),e(q,null),e(Y,null),e(_,{options:oe}))),te=()=>e(ae,null);K(e(X,null,e(V,null,e(te,null))),document.getElementById("root"));
//# sourceMappingURL=index.27a4a1c6.js.map
